<% layout('layout') -%>

<div class="container">
  <% if (currentUser) { %>
    <form method="POST" action="/posts/new-post" >
      <h2><i class="fa fa-commenting" aria-hidden="true"></i></h2>
      <h1>New Post</h1>
      <fieldset>
        <legend>Title:</legend>
        <input 
          type="text"
          name="title"
          id="title"
          minlength="3"
          maxlength="50"
          required
        />
      </fieldset>
      <fieldset>
        <legend>Message:</legend>
        <textarea 
          type="text"
          name="post"
          id="post"
          minlength="3"
          maxlength="1000"
          rows="7" 
          cols="40"
          required
        ></textarea>
      </fieldset>

      <button type="submit" class="btn">Submit</button>
    </form>
    
    <a class="cancel btn" href="<%= '/' %>">Cancel</a>

    <% if (typeof errors != 'undefined') { %>
      <ul class="errors">
        <% errors.forEach(err => { %>
          <li><%= err.msg %></li>
        <% }) %>
      </ul>
    <% } %>
  <% } else { %>
    <h1>Please Log In to post</h1>
  <% } %>
</div>